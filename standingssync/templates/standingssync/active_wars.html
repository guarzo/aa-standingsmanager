{% extends 'standingssync/_base.html' %}
{% load i18n %}
{% load humanize %}
{% load standingssync %}

{% block details %}
    <div class="panel panel-default">
        <div class="panel-heading" style="display:flex;">
            <h3 class="panel-title">{{ alliance }} ({{ war_count }})</h3>
        </div>
        <div class="panel-body">
            <div role="tabpanel" class="tab-pane">
                <table class="table table-striped table-width-fix" id="tab-active-wars">
                    <thead>
                        <tr>
                            <th>Declared</th>
                            <th>Started</th>
                            <th>Aggressor</th>
                            <th>Defender</th>
                            <th>Allies</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for war in wars %}
                            <tr>
                                <td class="text-nowrap">{{ war.declared|date:DATEFORMAT }}</td>
                                <td class="text-nowrap">{{ war.started|date:DATEFORMAT }}</td>
                                <td>{% war_participant war.aggressor %}</td>
                                <td>{% war_participant war.defender %}</td>
                                <td>
                                    {% for ally in war.allies %}
                                        {% war_participant ally %}<br>
                                    {% empty %}
                                        -
                                    {% endfor %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
    </div>
{% endblock %}

{% block extra_javascript %}
    {% include 'bundles/datatables-js.html' %}

    <script type="application/javascript">
        $(document).ready(function () {
            $('#tab-active-wars').DataTable({
                paging: false,
                info: false,
                order: [ [0, "asc"] ],
                columnDefs: [
                    { "sortable": false, "targets": [ 4 ] },
                ],
            });
        });
    </script>
{% endblock %}

{% block extra_css %}
    {{ block.super }}
    {% include 'bundles/datatables-css.html' %}
{% endblock %}
